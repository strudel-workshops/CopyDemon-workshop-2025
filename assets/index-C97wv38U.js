import{d as l,j as e,B as u,D as k,E as N,F as z,n as V,o as q,p as B,q as G,S as f,T as v,v as M,w as _,P as T,A as R,x as H,L as D}from"./index-Bim3sj1S.js";import{u as O,F as W,a as $}from"./FilterField-D-3ja8jc.js";import{P as K}from"./PageHeader-C4dTuKmc.js";import{S as J}from"./SciDataGrid-Cvs9MIRN.js";import{P as Q}from"./react-plotly-BlJ_R-fz.js";import{u as U,f as X,F as Y}from"./useListQuery-D8qQWjwO.js";import{S as Z,D as ee}from"./DataGrid-Do6FEKtW.js";import{A as te,C as re}from"./Close-B1XuzABm.js";import"./DatePicker-BlaNnvG9.js";import"./DateCalendar-CjdBD7KZ.js";import"./colorManipulator-BgIp0oFX.js";import"./Grid-DicCxPTC.js";import"./useQuery-CdYZCb31.js";import"./useGridRootProps-CmYFQhx6.js";import"./MenuItem-Dufk1pf4.js";import"./dividerClasses-UyEkEsDy.js";import"./Divider-C1fJ1zN9.js";const ae=({value:i,all:r,current:n})=>{const[d,p]=l.useState(null),[m,c]=l.useState(null),g=l.useRef(null),h=l.useMemo(()=>r.map(s=>s.title),[r]),x=l.useMemo(()=>r.map(s=>s.stats.contributions),[r]),y=s=>{p(s.currentTarget)},b=()=>{p(null),c(null)},P=!!d,w=l.useMemo(()=>h.map((s,S)=>s===n.title?"red":m===S?"#ff6b6b":"#1f77b4"),[h,m,n.title]),C=l.useMemo(()=>[{x:h,y:x,type:"bar",marker:{color:w}}],[h,x,w]);return e.jsxs(u,{sx:{height:"100%"},children:[e.jsx(u,{onMouseEnter:y,onMouseLeave:b,sx:{height:"100%",display:"flex",alignItems:"center",cursor:"pointer"},children:i}),e.jsx(k,{id:"contributions-chart-popover",sx:{pointerEvents:"none"},open:P,anchorEl:d,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:b,disableRestoreFocus:!0,children:e.jsx(u,{ref:g,sx:{padding:2,pointerEvents:"auto"},children:e.jsx(Q,{data:C,layout:{width:500,height:500,title:"Contributions Chart",margin:{t:40,r:20,b:40,l:40}},config:{displayModeBar:!1},onHover:s=>{s.points&&s.points.length>0&&c(s.points[0].pointIndex)},onUnhover:()=>{c(null)}})})})]})},ie=({filterConfigs:i,searchTerm:r,setPreviewItem:n})=>{const{activeFilters:d}=O(),[p,m]=l.useState(0),[c,g]=l.useState(25),[h,x]=l.useState(p*c),y="owner",b="client";let{isPending:P,isFetching:w,isError:C,data:s,error:S}=U({activeFilters:d,dataSource:"dummy-data/explor.json",filterConfigs:i,offset:h,pageSize:c,queryMode:b,staticParams:null});const A=a=>{n(a.row)},L=a=>{const o=a.pageSize!==c?0:a.page,t=a.pageSize,F=o*t;m(o),g(t),x(F)};if(P){const o=new Array(c).fill(null).map((t,F)=>F);return e.jsx(u,{sx:{padding:2},children:o.map(t=>e.jsx(Z,{height:50},t))})}return C?e.jsx(te,{severity:"error",children:S.message}):e.jsxs(e.Fragment,{children:[w&&e.jsx(N,{variant:"indeterminate"}),e.jsx(J,{rows:X(s,d,i,r),pagination:!0,paginationMode:b,onPaginationModelChange:L,getRowId:a=>a[y],columns:[{field:"name",headerName:"ID as name",type:"string",width:100,renderCell:a=>e.jsx(z,{href:`http://localhost:8081/contribs/projects/${a.value}`,target:"_blank",rel:"noopener noreferrer",underline:"hover",children:a.value})},{field:"title",headerName:"Title",width:400},{field:"is_public",headerName:"Public",width:150,type:"boolean"},{field:"is_approved",headerName:"Approved",width:150,type:"boolean"},{field:"stats.columns",headerName:"Columns",width:150,type:"number",valueGetter:(a,o)=>{var t;return(t=o.stats)==null?void 0:t.columns}},{field:"stats.contributions",headerName:"Contributions",width:150,type:"number",valueGetter:(a,o)=>{var t;return(t=o.stats)==null?void 0:t.contributions},renderCell:a=>e.jsx(ae,{value:a.value,all:s,current:a})},{field:"stats.tables",headerName:"Tables",width:150,type:"number",valueGetter:(a,o)=>{var t;return(t=o.stats)==null?void 0:t.tables}},{field:"stats.structures",headerName:"Structures",width:150,type:"number",valueGetter:(a,o)=>{var t;return(t=o.stats)==null?void 0:t.structures}},{field:"stats.attachments",headerName:"Attachments",width:150,type:"number",valueGetter:(a,o)=>{var t;return(t=o.stats)==null?void 0:t.attachments}}],disableColumnSelector:!0,autoHeight:!0,initialState:{pagination:{paginationModel:{page:p,pageSize:c}}},onRowClick:A})]})};var j={},I;function ne(){if(I)return j;I=1;var i=V();Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var r=i(q()),n=B();return j.default=(0,r.default)((0,n.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList"),j}var se=ne();const oe=G(se),le=({searchTerm:i,setSearchTerm:r,onToggleFiltersPanel:n})=>{const d=p=>{r(p.target.value)};return e.jsxs(f,{direction:"row",spacing:2,alignItems:"center",sx:{overflow:"hidden",padding:2},children:[e.jsx(v,{variant:"h6",component:"h2",flex:1,children:"Entity List"}),e.jsx(M,{startIcon:e.jsx(oe,{}),onClick:n,children:"Filters"}),e.jsx(_,{variant:"outlined",label:"Search",size:"small",value:i,onChange:d})]})},de=({filterConfigs:i,onClose:r})=>e.jsx(Y,{grouped:!1,onClose:r,sx:{border:"none"},children:i.map((n,d)=>e.jsx(W,{field:n.field,label:n.label,operator:"contains",filterComponent:n.filterComponent,filterProps:n.filterProps},`${n.field}-${d}`))}),ce=[{field:"id",headerName:"ID",width:50},{field:"attr1",headerName:"Attribute 1",width:100},{field:"attr2",headerName:"Attribute 2",width:100},{field:"attr3",headerName:"Attribute 3",width:100}],ue=Array(25).fill(0),pe=ue.map((i,r)=>({id:r,attr1:"value",attr2:"value",attr3:"value"})),he=({previewItem:i,onClose:r})=>e.jsx(T,{elevation:0,sx:{height:"100%",padding:2},children:e.jsxs(f,{spacing:3,children:[e.jsxs(f,{spacing:1,children:[e.jsxs(f,{direction:"row",children:[e.jsx(v,{variant:"h6",component:"h3",flex:1,children:e.jsx(R,{to:"/explore-data/$id",params:{id:i.Id},children:i["Planet Name"]})}),e.jsx(H,{size:"small",onClick:r,children:e.jsx(re,{})})]}),e.jsx(v,{variant:"body2",children:"Row description, subtitle, or helper text."})]}),e.jsxs(u,{children:[e.jsx(v,{fontWeight:"medium",mb:1,children:"Property Group 1"}),e.jsx(D,{rows:[{label:"Property 1",value:"value"},{label:"Property 2",value:"value"},{label:"Property 3",value:"value"}]})]}),e.jsxs(u,{children:[e.jsx(v,{fontWeight:"medium",mb:1,children:"Property Group 2"}),e.jsx(D,{rows:[{label:"Property 4",value:"value"},{label:"Property 5",value:"value"}]})]}),e.jsxs(u,{children:[e.jsx(v,{fontWeight:"medium",mb:1,children:"Related Data"}),e.jsx(ee,{rows:pe,columns:ce,disableRowSelectionOnClick:!0,initialState:{pagination:{paginationModel:{pageSize:5}}}})]}),e.jsxs(f,{direction:"row",children:[e.jsx(R,{to:"/explore-data/$id",params:{id:i.Id},children:e.jsx(M,{variant:"contained",children:"View details"})}),e.jsx(M,{variant:"outlined",children:"Export data"})]})]})}),E=[{field:"Discovery Method",label:"Discovery Method",operator:"contains-one-of",filterComponent:"CheckboxList",filterProps:{options:[{label:"Astrometry",value:"Astrometry"},{label:"Disk Kinematics",value:"Disk Kinematics"},{label:"Eclipse Timing Variations",value:"Eclipse Timing Variations"},{label:"Imaging",value:"Imaging"},{label:"Microlensing",value:"Microlensing"},{label:"Radial Velocity",value:"Radial Velocity"},{label:"Transit",value:"Transit"}]}},{field:"Mass",label:"Mass",operator:"between-inclusive",filterComponent:"RangeSlider",filterProps:{min:0,max:1e4}}],Ee=function(){const[r,n]=l.useState(""),[d,p]=l.useState(),[m,c]=l.useState(!0),g=()=>{c(!1)},h=()=>{c(!m)},x=()=>{p(null)};return e.jsx($,{children:e.jsxs(u,{children:[e.jsx(K,{pageTitle:"Explorer Data App",description:"Testing Material Project Contribution Explorer",sx:{marginBottom:1,padding:2}}),e.jsx(u,{children:e.jsxs(f,{direction:"row",children:[m&&e.jsx(u,{sx:{width:"350px"},children:e.jsx(de,{filterConfigs:E,onClose:g})}),e.jsxs(T,{elevation:0,sx:{flex:1,minHeight:"600px",minWidth:0},children:[e.jsx(le,{searchTerm:r,setSearchTerm:n,onToggleFiltersPanel:h}),e.jsx(ie,{filterConfigs:E,searchTerm:r,setPreviewItem:p})]}),d&&e.jsx(u,{sx:{minWidth:"400px"},children:e.jsx(he,{previewItem:d,onClose:x})})]})})]})})};export{Ee as component};
